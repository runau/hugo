---
title: "ELBでEC2をロードバランスする"
date: 2020-04-26T15:53:15+09:00
meta_image: "posts/meta_image/20200426_morning.png"
tags:
    - aws
    - VPC
    - cloudFormation
categories: 
    - 資格
description: "ツイート感覚で適当に書く技術ブログ。静的サイトジェネレーターhugoをs3に載せて、月額運用費5円で運用するブログ。毎日のただの作業記録をツイートのように書いていきますw"
draft: true
---

awsのお勉強を本格的に始めた。

やっぱりまず勉強すべきはEC2ですね…

お金かかるからと遠ざけていたけれども、もう、逃げない//

## やる事

VPCを作って、EC2をELBに繋いで、アクセスする。

![ELB,EC2システム構成図](https://github.com/runau/img/blob/master/elb-ec2.png?raw=true)

こんな感じなのかな？

## VPC

VPCのベースは難しいからとりあえずqiitaからまるごと拝借。

[CloudFormationを使ってVPCを構築する](https://qiita.com/okubot55/items/b18a5dd5166f1ec2696c)

これを参考にとりあえずVPC環境を作る

後々、一から理解しなおす時間も作る…

うぅ、先が長い…

とりあえず、それぞれつくった。

↓スタックのリソース

![スタック](../img/elb-ec2-1.png)

もう、どれがマスキングすべきデータ化も分からんから、全部マスキングww

## EC2立てる

二つEC2を立てる。linux2のt2.nanoを二つ。

ここを参考にした。

[ELB 経由で EC2 にアクセスする](https://qiita.com/kasaharu/items/02564b5b139b80574f4a)

お金かかるのは覚悟したけど、出来るだけ、少しでも安く済ませたいww

と言いつつね、今月、まさかのlambdaで1ドル以上取られてしまったよww

あとでなんでそんなことになったかブログも書きたい//

クラウドフォーメーションで作ってもいいんだけど、今回はコンソールから作った。

![スタック](../img/elb-ec2-2.png)

全部スクショ上げると長くなるので割愛。

ネットワークとサブネットの設定を↑で作ったものを指定。

![スタック](../img/elb-ec2-3.png)

なんか、↓ここからVPC自体も作れそうだから、後で、ここから作れるか試してみよう//

![スタック](../img/elb-ec2-4.png)

あとね、最近知った。ここにNameを設定するとインスタンス名になってくれるみたい。正しいやり方かわかんないけどw

![スタック](../img/elb-ec2-5.png)

セキュリティグループは新しく作った。

![スタック](../img/elb-ec2-6.png)
